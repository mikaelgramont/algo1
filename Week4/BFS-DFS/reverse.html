<!DOCTYPE html>
<html>
<head>
	<title>Reversing a graph</title>
</head>
<body>
<script>
var graph = [
	[1, 3, 4],
	[2],
	[],
	[4],
	[5],
	[]
];

var expectedRev = [
	[],
	[0],
	[1],
	[0],
	[0, 3],
	[4]
];

function reverseGraph(g) {
	var rev = [];

	for (var i = 0, l = g.length; i <l; i++) {
		rev[i] = [];
	};

	for (var i = 0, l = g.length; i <l; i++) {
		for (var j = 0, l2 = g[i].length; j <l2; j++) {
			var current = g[i][j];
			rev[current].push(i);
		}
	};
	return rev;
}
	
(function testReverse() {
	rev = reverseGraph(graph);
	if (rev.length != expectedRev.length) {
		console.log("Length is different", "expected", expectedRev.length, "found", rev.length);
		return;
	}

	var error = false;
	for (var i = 0, l = rev.length; i <l; i++) {
		if (rev[i].join(' ') !== expectedRev[i].join(' ')) {
			console.log("Wrong value.", "i", i, "expected", expectedRev[i].join(' '), "found", rev[i].join(' '));
			error = true;
		}
	}

	if (error) {
		console.log("Wrong reversal.");
		console.log("Expected");
		console.table(expectedRev);
		console.log("Found");
		console.table(rev);
	} else {
		console.log("success!");
	}
})();

</script>
</body>
</html>