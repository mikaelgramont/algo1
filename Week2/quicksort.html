<html>
<head><title>Quicksort</title></head>
<script>
var test = [3, 8, 9, 2, 5, 4, 7, 6, 1];
quicksort(test);
console.log(test);


function quicksort(arr, l, r) {
	l = l || 0;
	r = r || arr.length - 1;

	if (l >= r) {
		return [];
	}

	var length = r - l + 1;

	var p = partition(arr, l, r);

	var less = quicksort(arr, l, p - 1);
	var more = quicksort(arr, p + 1, r);
	return less.concat(arr[p], more);
}

function partition(arr, l, r) {
	var p = arr[l];
	var i = l + 1;
	for (var j = l + 1; j <= r; j++) {
		if (arr[j] < p) {
			swap(arr, i, j);
			i++;
		}
	}
	swap(arr, l, i - 1);

	return i - 1;
}

function swap(arr, m, n) {
	var temp = arr[m];
	arr[m] = arr[n]
	arr[n] = temp;	
}

</script>
</html>